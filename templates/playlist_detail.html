{% extends 'layout.html' %}

{% block title %}{{ playlist.name }} - 我的歌单{% endblock %}

{% block content %}
<div class="mb-6">
    <a href="{{ url_for('my_playlists') }}" class="btn btn-sm btn-outline mb-4">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        返回我的歌单
    </a>
    <h1 class="text-3xl sm:text-4xl font-bold">{{ playlist.name }}</h1>
    <p class="text-sm text-gray-500 mt-1">创建于: {{ playlist.created_at.split(' ')[0] }}</p>
</div>

{% if songs %}
    <div class="flex flex-wrap gap-3 mb-4">
        {% if songs|length > 0 %}
        <a href="{{ url_for('song_player', query=songs[0].song_query, song_api_index=songs[0].song_api_index, source='playlist', playlist_id=playlist.id) }}" class="btn btn-primary">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            播放全部
        </a>
        {% endif %}
        <a href="{{ url_for('index') }}" class="btn btn-outline">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
            </svg>
            搜索更多
        </a>
    </div>
    <div class="overflow-x-auto">
        <table class="table table-sm md:table-md w-full">
            <thead>
                <tr>
                    <th>#</th>
                    <th>歌曲名称</th>
                    <th>歌手</th>
                    <th class="hidden sm:table-cell">封面</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {% for song in songs %}
                <tr>
                    <th>{{ loop.index }}</th>
                    <td>
                        <a href="{{ url_for('song_player', query=song.song_query, song_api_index=song.song_api_index, source='playlist', playlist_id=playlist.id) }}" class="link link-hover">
                            {{ song.title }}
                        </a>
                    </td>
                    <td>{{ song.singer if song.singer else '未知歌手' }}</td>
                    <td class="hidden sm:table-cell">
                        {% if song.cover %}
                        <div class="avatar">
                            <div class="w-10 h-10 rounded">
                                <img src="{{ song.cover }}" alt="{{ song.title }}" />
                            </div>
                        </div>
                        {% else %}
                        <div class="avatar placeholder">
                            <div class="bg-neutral-focus text-neutral-content rounded w-12 h-12">
                                <span class="text-xl">?</span>
                            </div>
                        </div>
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ url_for('song_player', query=song.song_query, song_api_index=song.song_api_index, source='playlist', playlist_id=playlist.id) }}" class="btn btn-xs btn-outline btn-info mr-1">播放</a>
                        <form method="POST" action="{{ url_for('remove_song_from_playlist', playlist_id=playlist.id, song_id=song.id) }}" class="inline" onsubmit="return confirm('确定要从歌单中移除这首歌曲吗？');">
                            <button type="submit" class="btn btn-xs btn-outline btn-warning">移除</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% else %}
    <div class="text-center py-10">
        <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
        </svg>
        <h2 class="mt-2 text-xl font-semibold">这个歌单还是空的</h2>
        <p class="mt-1 text-sm text-gray-500">去发现一些好音乐并添加到这里吧！</p>
        <div class="mt-6">
            <a href="{{ url_for('index') }}" class="btn btn-primary">去搜索歌曲</a>
        </div>
    </div>
{% endif %}

{% endblock %} 